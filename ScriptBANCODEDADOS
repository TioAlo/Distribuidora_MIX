-- 1. Criação do Banco de Dados (opcional se já existir)
CREATE DATABASE IF NOT EXISTS distribuidora_mix;
USE distribuidora_mix;

-- 2. Limpeza de tabelas antigas para evitar conflitos de estrutura
DROP TABLE IF EXISTS produtos;
DROP TABLE IF EXISTS usuarios;

-- 3. Criação da Tabela de Produtos (Ajustada para os Filtros e Cascata)
CREATE TABLE produtos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(150) NOT NULL,
    tipo_produto VARCHAR(50) NOT NULL, -- Ex: Cervejas, Destilados
    subtipo VARCHAR(50) NOT NULL,      -- Ex: Puro Malte, Vodka
    marca VARCHAR(50) NOT NULL,        -- Ex: Skol, Absolut
    preco DECIMAL(10,2) NOT NULL,
    valor_medida DECIMAL(10,2) NOT NULL,
    unidade_medida VARCHAR(10) NOT NULL, -- Ex: ml, l, un
    estoque INT NOT NULL,
    descricao TEXT,
    imagem VARCHAR(255),
    destaque BOOLEAN DEFAULT FALSE
);

-- 4. Criação da Tabela de Usuários (Com a coluna Perfil para Admin)
CREATE TABLE usuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(150) NOT NULL,
    cpf VARCHAR(14) UNIQUE NOT NULL,
    telefone VARCHAR(20) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    rua VARCHAR(150) NOT NULL,
    numero VARCHAR(10) NOT NULL,
    bairro VARCHAR(100) NOT NULL,
    senha VARCHAR(255) NOT NULL,
    perfil VARCHAR(20) DEFAULT 'cliente', -- 'Admin' ou 'cliente'
    data_cadastro TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 5. Inserção do Usuário Administrador
-- Substitua 'senha123' pela senha que você deseja usar
INSERT INTO usuarios (nome, cpf, telefone, email, rua, numero, bairro, senha, perfil) 
VALUES (
    'Administrador Mix', 
    '000.000.000-00', 
    '(32) 99999-9999', 
    'Admin@Admin.com', 
    'Rua Principal', 
    '123', 
    'Centro', 
    'Admin', 
    'Admin'
);

